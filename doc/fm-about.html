<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<TITLE>survivor: About Fix Modules</TITLE>
<LINK REL=STYLESHEET TYPE="text/css" HREF=style.css>
</HEAD>

<BODY>
<TABLE BORDER=0 WIDTH=100%>
<TR>
<TD COLSPAN=2 CLASS="pagetop">SURVIVOR: About Fix Modules</TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH=90%>

 <UL>
 <LI><A HREF=#about>What Fix Modules Do</A>
 <LI><A HREF=#modtypes>Module Types</A>
 <LI><A HREF=#moddata>Module Data</A>
 <LI><A HREF=#custom>Adding Custom Modules</A>
 </UL>

 <A ID="about"></A>
 <TABLE BORDER=0 WIDTH=100%>
 <TR>
 <TD CLASS="section" COLSPAN=2>
 What Fix Modules Do
 </TD>
 </TR>
 </TABLE>

 <P>

 Fix Modules attempt to perform corrective actions when a failure
 has been detected.

 <P>

 <A ID="modtypes"></A>
 <TABLE BORDER=0 WIDTH=100%>
 <TR>
 <TD CLASS="section" COLSPAN=2>
 Module Types
 </TD>
 </TR>
 </TABLE>

 <P>

 Fix Modules may only be scripted, written in a language such as Perl
 or shell.  Fix Modules only run remotely, on the host to be fixed.

 <P>

 Fix Modules generally require very high levels of privilege to run,
 often root.  As such, caution must be taken in writing and installing
 these modules.  While the scheduler will enforce locking to prevent
 the same Fix from being run more than one time concurrently, care
 should still be taken during execution to prevent race conditions and
 to avoid making a broken situation worse instead of better.

 <P>

 <A ID="moddata"></A>
 <TABLE BORDER=0 WIDTH=100%>
 <TR>
 <TD CLASS="section" COLSPAN=2>
 Module Data
 </TD>
 </TR>
 </TABLE>

 <P>

 Fix Modules are provided an XML document containing a <A
 HREF="survivor.dtd">SurvivorFixData</A> element, which may include
 arguments as configured in <A
 HREF="cf-check.html"><TT>check.cf</TT></A>.

 <P>

 Modules generate an XML document containing a
 <A HREF="survivor.dtd">SurvivorFixResult</A> element.

 <P>
  
 <A ID="custom"></A>
 <TABLE BORDER=0 WIDTH=100%>
 <TR>
 <TD CLASS="section" COLSPAN=2>
 Adding Custom Modules
 </TD>
 </TR>
 </TABLE>

 <P>

 All Fix Modules must conform to the <A HREF=spec-fm.html>Fix Module
 Specification</A>, otherwise they may not interact correctly with the
 scheduler.

 <P>

 It is important to test Fix Modules via the <A HREF=sr.html>remote
 gateway</A>, the same way <A HREF=tm-about.html>transport modules</A>
 will invoke them.  Some modules may behave incorrectly when stdin is a
 network socket, and others may be written incorrectly assuming library
 paths.

 <P>

 Determine if the Fix Module requires either <A
 HREF="cf-check.html#kw-requirehost">host level</A> or <A
 HREF="cf-check.html#kw-requireservice">service level</A> locking and
 document any such requirement.

 <P>

 Routines useful for building Fix Modules in Perl are provided in
 <TT>Survivor.pm</TT> and <TT>Survivor::Fix.pm</TT>.  As a starting
 point, see the sample test module in <TT>src/modules/fix/test</TT>.

 <P>

 For information on these modules, run

 <PRE>
     % perldoc src/modules/common/Survivor.pm
     % perldoc src/modules/common/Survivor/Fix.pm
 </PRE>

 Other languages may be used, but no routines are provided with this
 package.
  
 <P>

 For assistance in testing Fix Modules, the <A
 HREF="util-xmlmaker.html">XML Maker utility</A> may be useful.

 <P>

 <B>Important</B>: Please see the <A HREF=license.html>license</A>
 for this package to see if custom modules are subject to the same
 license.

 <P>
 
<HR>
<I>$Date: 2006/11/19 22:38:31 $</I><BR>
<I>$Revision: 0.5 $</I><BR>
</TD>

<TD CLASS="contents" WIDTH=10%>
 <B>keywords</B><BR>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>